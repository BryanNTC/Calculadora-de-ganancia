<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculadora de ganancia</title>
    <style>
      body {
        background-image: url(media/SilksongPromo2.png);
        background-size: 100% 100%;
        background-attachment: fixed;
        margin: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
      }

      /* Modificar el CSS para que sea responsivo */
      form {
        color: white;
        background-color: black;
        border: 0.5vh solid white;
        opacity: 90%;
        border-radius: 5mm;
        padding: 1cm;
        max-height: 70%;
        max-width: 70%;
        overflow: auto;
        font-size: 4vh;
      }

      form {
        text-align: center;
      }

      form div {
        margin: 2mm 0;
      }

      input {
        font-size: 1em;
      }

      input[type="number"]::-webkit-inner-spin-button {
        display: none;
      }

      #ganancia {
        font-weight: bold;
      }

      audio {
        position: absolute;
        bottom: 0px;
        right: 0px;
        margin: 1mm;
      }

      @media screen and (orientation: portrait) {
        body {
          background-image: url(media/SilksongPromo1.png);
        }

        form * {
          text-align: center;
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <form>
      <div>
        ¿Cuánto tiempo se abrió el almacén?
        <input type="time" id="tiempoAbierto" />
      </div>
      <div>
        ¿Cuánto tiempo trabajaste?
        <input type="time" id="tiempoTrabajado" />
      </div>
      <div>
        <div>¿Cuánta ganancia se hizo de Quiniela?</div>
        <input type="number" id="quiniela" placeholder="Ganancia" />
        <div style="text-align: center;">
          <input type="submit" onclick="event.preventDefault(), calcularGanancia(), hornetSounds()" />
          <input type="reset" onclick="hornetSounds()" />
        </div>
      </div>
    </form>
    <audio src="media/Nightmare King Hollow Knight The Grimm Troupe.mp3" controls></audio>
    <script>
      function calcularGanancia() {
        const sueldoPorHora = 21107 / 200;
        const tiempoAbierto = document.querySelector("#tiempoAbierto").valueAsNumber / 3.6e6;
        const tiempoTrabajado = document.querySelector("#tiempoTrabajado").valueAsNumber / 3.6e6;
        const quiniela = document.querySelector("#quiniela").value;
        const ganancia = Math.round(tiempoTrabajado * (sueldoPorHora + quiniela / tiempoAbierto));
        let mostrarGanancia = document.querySelector("#ganancia");
        if (!mostrarGanancia) {
          mostrarGanancia = document.createElement("div");
          mostrarGanancia.setAttribute("id", "ganancia");
          document.querySelector("form").appendChild(mostrarGanancia);
        }
        if (ganancia) {
          mostrarGanancia.innerText = "Tu ganancia de hoy es: $" + ganancia;
        } else {
          mostrarGanancia.innerText = "¡Error!";
        }
      }
      const sonidos = [
        new Audio("media/garava.mp3"),
        new Audio("media/ediro.mp3"),
        new Audio("media/egale.mp3"),
        new Audio("media/gitgud.mp3"),
      ];
      function randomIndex(array) {
        return Math.floor(Math.random() * sonidos.length);
      }
      const rng = {
        num: randomIndex(sonidos),
        numUsado: undefined,
      };
      function hornetSounds() {
        while (rng.num === rng.numUsado) {
          rng.num = randomIndex(sonidos);
        }
        sonidos[rng.num].play();
        rng.numUsado = rng.num;
      }
    </script>
  </body>
</html>
